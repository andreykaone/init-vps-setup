# VPS Initial Setup Script

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π Bash-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ (Ubuntu/Debian).

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –°–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ **"–°–Ω–∞—á–∞–ª–∞ —Å–ø—Ä–æ—Å–∏, –ø–æ—Ç–æ–º –¥–µ–ª–∞–π"**. –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ, –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ —É–¥–æ–±–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ, –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤–∞—à–µ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —Å–∏—Å—Ç–µ–º–µ.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üõ† –°–∏—Å—Ç–µ–º–∞
*   **Smart Update**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∫–æ–Ω—Ñ–∏–≥–æ–≤ `keep-old`).
*   **Hostname**: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–º–µ–Ω–∏ —Ö–æ—Å—Ç–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `/etc/hosts`.
*   **Timezone**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é Europe/Moscow).
*   **Swap**: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –ø–æ–¥–∫–∞—á–∫–∏ (—Ä–∞–∑–º–µ—Ä –Ω–∞ –≤—ã–±–æ—Ä) –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
*   **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–∞–≤–∞–º–∏ `sudo`.
*   **SSH Hardening**:
    *   –°–º–µ–Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ 2222).
    *   –ó–∞–ø—Ä–µ—Ç –≤—Ö–æ–¥–∞ –ø–æ–¥ `root`.
    *   **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—Ö–æ–¥–∞ –ø–æ –ø–∞—Ä–æ–ª—é** (—Ç–æ–ª—å–∫–æ –ø–æ SSH-–∫–ª—é—á—É).
*   **Firewall (UFW)**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª (—Ä–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ SSH –ø–æ—Ä—Ç, 80 –∏ 443).
*   **Fail2Ban**: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –ø–µ—Ä–µ–±–æ—Ä–∞ –ø–∞—Ä–æ–ª–µ–π (SSH jail).
*   **Auto-Updates**: –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (`unattended-upgrades`).

### üê≥ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
*   **Docker & Docker Compose**: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç `get.docker.com`.
*   **–ë–∞–∑–æ–≤–æ–µ –ü–û**: `curl`, `git`, `htop`, `ufw`, `fail2ban`.
*   **–û—á–∏—Å—Ç–∫–∞**: –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –∏ –∫—ç—à–∞ (`autoremove`, `autoclean`).

---

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1.  –ó–∞–π–¥–∏—Ç–µ –Ω–∞ –≤–∞—à **–Ω–æ–≤—ã–π** VPS –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º `root`.
2.  –°–∫–∞—á–∞–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
curl -sSL https://raw.githubusercontent.com/andreykaone/init-vps-setup/main/init-vps-setup.sh -o setup.sh && chmod +x setup.sh && sudo ./setup.sh
```
*(–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `curl -O ...`)*

3.  **–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã**: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ—Ä—Ç, –∫–ª—é—á –∏ —Ç.–¥.
4.  **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É**: –°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç —Å–≤–æ–¥–∫—É –Ω–∞—Å—Ç—Ä–æ–µ–∫.
5.  **–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ**: –ù–∞–∂–º–∏—Ç–µ `Y`, –∏ —Å–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç –≤—Å—é —Ä–∞–±–æ—Ç—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞:
1.  **–ù–ï –ó–ê–ö–†–´–í–ê–ô–¢–ï** —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.
2.  –û—Ç–∫—Ä–æ–π—Ç–µ **–Ω–æ–≤–æ–µ** –æ–∫–Ω–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.
3.  –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
    ```bash
    ssh -p <–ù–û–í–´–ô_–ü–û–†–¢> <–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨>@<IP_–ê–î–†–ï–°>
    ```
4.  –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω, –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å root-—Å–µ—Å—Å–∏—é.

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
*   Ubuntu 20.04 / 22.04 / 24.04 LTS
*   Debian 11 / 12
